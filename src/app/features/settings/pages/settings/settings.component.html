<div class="min-h-screen bg-gray-50 pb-12">
    <!-- Header -->
    <div class="bg-white shadow-sm border-b border-gray-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="py-8">
                <h1 class="text-3xl font-bold text-gray-900">Account Settings</h1>
                <p class="text-gray-600 mt-2">Manage your profile, security, and preferences</p>
            </div>

            <!-- Tabs -->
            <div class="flex space-x-8 -mb-px overflow-x-auto">
                <button (click)="setActiveTab('profile')" [class.border-primary-600]="activeTab === 'profile'"
                    [class.text-primary-600]="activeTab === 'profile'"
                    [class.border-transparent]="activeTab !== 'profile'" [class.text-gray-500]="activeTab !== 'profile'"
                    class="pb-4 border-b-2 font-medium text-sm whitespace-nowrap transition-colors hover:text-gray-700">
                    <div class="flex items-center gap-2">
                        <lucide-icon [img]="UserIcon" class="h-4 w-4"></lucide-icon>
                        Profile
                    </div>
                </button>
                <button (click)="setActiveTab('security')" [class.border-primary-600]="activeTab === 'security'"
                    [class.text-primary-600]="activeTab === 'security'"
                    [class.border-transparent]="activeTab !== 'security'"
                    [class.text-gray-500]="activeTab !== 'security'"
                    class="pb-4 border-b-2 font-medium text-sm whitespace-nowrap transition-colors hover:text-gray-700">
                    <div class="flex items-center gap-2">
                        <lucide-icon [img]="LockIcon" class="h-4 w-4"></lucide-icon>
                        Security
                    </div>
                </button>
                <button (click)="setActiveTab('preferences')" [class.border-primary-600]="activeTab === 'preferences'"
                    [class.text-primary-600]="activeTab === 'preferences'"
                    [class.border-transparent]="activeTab !== 'preferences'"
                    [class.text-gray-500]="activeTab !== 'preferences'"
                    class="pb-4 border-b-2 font-medium text-sm whitespace-nowrap transition-colors hover:text-gray-700">
                    <div class="flex items-center gap-2">
                        <lucide-icon [img]="BellIcon" class="h-4 w-4"></lucide-icon>
                        Preferences
                    </div>
                </button>
                <!-- Verification Tab Removed -->
            </div>
        </div>
    </div>

    <!-- Content -->
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">

        <!-- Profile Tab -->
        <div *ngIf="activeTab === 'profile'" class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 sm:p-8">
            <h2 class="text-xl font-bold text-gray-900 mb-6">Personal Information</h2>

            <form (ngSubmit)="updateProfile()">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">First Name</label>
                        <input type="text" [(ngModel)]="profileData.firstName" name="firstName"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-1">Last Name</label>
                        <input type="text" [(ngModel)]="profileData.lastName" name="lastName"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500">
                    </div>
                </div>

                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Email Address</label>
                    <input type="email" [(ngModel)]="profileData.email" name="email" disabled
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-50 text-gray-500 cursor-not-allowed">
                    <p class="mt-1 text-xs text-gray-500">Contact support to change your email</p>
                </div>

                <div class="mb-8">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Phone Number</label>
                    <input type="tel" [(ngModel)]="profileData.phone" name="phone"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500">
                </div>

                <div class="flex items-center justify-end pt-6 border-t border-gray-200">
                    <button type="submit" [disabled]="loading"
                        class="px-6 py-2 bg-primary-600 text-white font-medium rounded-lg hover:bg-primary-700 focus:ring-4 focus:ring-primary-100 disabled:opacity-50">
                        {{ loading ? 'Saving...' : 'Save Changes' }}
                    </button>
                </div>
            </form>
        </div>

        <!-- Security Tab -->
        <div *ngIf="activeTab === 'security'" class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 sm:p-8">
            <h2 class="text-xl font-bold text-gray-900 mb-6">Change Password</h2>

            <form (ngSubmit)="updatePassword()">
                <!-- Only show current password if we want to enforce it, but Supabase usually handles it securely. 
                     Typically auth.updateUser({ password }) doesn't require old password if session is active.
                     We can omit current password if the backend doesn't require it, or just keep the field for UI consistency but not use it.
                     Let's keep it simple. -->

                <div class="mb-6">
                    <label class="block text-sm font-medium text-gray-700 mb-1">New Password</label>
                    <input type="password" [(ngModel)]="passwordData.newPassword" name="newPassword"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500">
                </div>

                <div class="mb-8">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Confirm New Password</label>
                    <input type="password" [(ngModel)]="passwordData.confirmPassword" name="confirmPassword"
                        class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500">
                </div>

                <div class="flex items-center justify-end pt-6 border-t border-gray-200">
                    <button type="submit" [disabled]="loading"
                        class="px-6 py-2 bg-primary-600 text-white font-medium rounded-lg hover:bg-primary-700 focus:ring-4 focus:ring-primary-100 disabled:opacity-50">
                        {{ loading ? 'Updating...' : 'Update Password' }}
                    </button>
                </div>
            </form>

            <div class="mt-8 pt-8 border-t border-gray-200">
                <h3 class="text-lg font-bold text-red-600 mb-4">Danger Zone</h3>
                <button (click)="logout()"
                    class="flex items-center px-4 py-2 border border-red-200 text-red-600 rounded-lg hover:bg-red-50">
                    <lucide-icon [img]="LogOutIcon" class="h-4 w-4 mr-2"></lucide-icon>
                    Sign Out
                </button>
            </div>
        </div>

        <!-- Preferences Tab -->
        <div *ngIf="activeTab === 'preferences'"
            class="bg-white rounded-xl shadow-sm border border-gray-200 p-6 sm:p-8">
            <h2 class="text-xl font-bold text-gray-900 mb-6">Notification Preferences</h2>

            <div class="space-y-6">
                <div class="flex items-center justify-between">
                    <div>
                        <h3 class="font-medium text-gray-900">Email Notifications</h3>
                        <p class="text-sm text-gray-500">Receive emails about your account activity</p>
                    </div>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" [(ngModel)]="preferences.emailNotifications" class="sr-only peer">
                        <div
                            class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600">
                        </div>
                    </label>
                </div>

                <div class="flex items-center justify-between">
                    <div>
                        <h3 class="font-medium text-gray-900">Event Reminders</h3>
                        <p class="text-sm text-gray-500">Get reminded about upcoming events</p>
                    </div>
                    <label class="relative inline-flex items-center cursor-pointer">
                        <input type="checkbox" [(ngModel)]="preferences.eventReminders" class="sr-only peer">
                        <div
                            class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600">
                        </div>
                    </label>
                </div>

                <div class="flex items-center justify-end pt-6 border-t border-gray-200">
                    <button (click)="savePreferences()"
                        class="px-6 py-2 bg-primary-600 text-white font-medium rounded-lg hover:bg-primary-700">
                        Save Preferences
                    </button>
                </div>
            </div>
        </div>

        <!-- Verification Tab -->
        <!-- Verification Tab Content Removed -->
    </div>
</div>